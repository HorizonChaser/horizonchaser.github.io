---
title: CS Network Review and Summary
date: 2021-06-13 20:47:19
math: true
excerpt: 计网复习总结
tags:
 - CS Network
 - Review
---

# Part 1 概述

## Chapter 1 绪论

### 数据通信的概念

- 四个关键因素: 传递性 准确性 及时性 抖动性
- 五个组成部分: 报文 发送方 接收方 传输介质 协议
  
### 数据流

- 单工: 通信是单方向的
- 半双工: 通信是双向的, 但不能同时收发
- 全双工: 双向通信, 可同时收发
  
### 连接类型

- 点到点: 两设备间的专用线路
- 多点连接: 两台以上的设备共用单一链路

### 物理拓扑结构

- 网状: 任意两设备间都有专用的点到点线路, $n$台设备需要$\frac{n*(n-1)}{2}$条双工链路
- 星型: 每台设备仅拥有一条与中央控制器 (被称为集线器, hub) 相连的点到点线路
- 总线: 用一条较长的线缆作为主干来连接网络上的所有设备, 各设备通过引出线连接到主干
- 环状: 每台设备只与两侧设备有一条专用的点到点连接, 信号以一个方向在环中传输, 每台设备均有中继器 (可再生并转发收到的所有信号)
- 混合型
  
### 网络分类

- 局域网 (local area network, LAN): 小范围内的共享, 例如一间办公室或一所学校, 通常仅采用一种传输介质
- 广域网 (wide area network, WAN):
  - 交换广域网: 将不同的网络连接起来, 通常包含至少一个网际互联设备 (例如路由器)
  - 点到点广域网: 将一台设备连接到广域网, 例如 ISP (Internet service provider, 网络服务提供商) 提供的网络服务
- 城域网 (metropolitian area network, MAN): 规模介于 LAN 和 WAN 之间, 覆盖范围通常是一个乡镇 / 城市
  
### 协议和标准

#### 协议三要素

- 语法: 数据的结构或格式, 即数据是以何种顺序表示的
- 语义: 每一个位片段的含义, 即如何理解每一个位置上的位的含义
- 时序: 报文发送的时间和发送的速率
  
#### 标准

- 事实标准: 未经团体或组织承认但已经带广泛使用中的标准
- 法定标准: 有官方认可的组织制定的标准

## Chapter 2 网络模型

### OSI模型

OSI (Open System Interconnection, 开放系统互连) 模型, **不是协议, 也不是 ISO 那个组织**

#### 分层的概念与层间连接

- 对等过程: 设备间同一层次的通信过程, 例如物理层 - 物理层, 传输层 - 传输层
- 层间接口: 每层的接口都定义了本层向上下两层提供的服务, 无关层内的具体实现, 便于修改
- 封装: 第$N-1$层的分组中的数据部分是第$N$层的完整分组, 后者被$N-1$层视为一个完整的数据单元, 不关心内部结构

#### 各层功能

##### 物理层

**负责位从一个节点到另一个节点的传递**, 定义了接口和介质的物理特性, **不对数据进行任何改动**

###### 功能

- 位的表示 (把0 1转换为对应种类的信号)
- 传输速率 (发送位的速度, 每一位持续的时间)
- 位同步, 线路配置, 物理拓扑结构, 传输方式等等

##### 数据链路层

**负责帧从一个节点 (node, 通常也被称作一跳, one hop)到下一个节点 (即下一跳) 的传递, 在同一个网络内部**, 将物理层变为可靠的链路

###### 功能

- 成帧: 将来自网络层的位流分割为帧 (frame)
- 物理寻址: **在本地网络范围内**, 按照网络设备的物理地址寻找接收者, 例如 MAC 地址
- 流量控制: 协调发送速率, 防止过载
- 差错控制: 检测与重发损坏与丢失的帧, 并防止重复的帧
- 访问控制: 并发访问同一条链路时决定访问的顺序

##### 网络层

**负责将各个分组从源地址传送到目的地址 (源端到目的端, 即端到端), 可以跨网络传送**, 但不保证报文间的到达顺序 - ~~所以叫网络层(个人理解)~~

###### 功能

- 逻辑寻址: 与物理寻址相对, 可以跨网络
- 路由选择: 提供在网络间传递分组的路径

##### 传输层

**负责报文的进程到进程传递**, 保证报文间的**顺序**与内容正确并提供给相应的进程

###### 功能

- 服务点寻址: 也叫端口寻址, 把报文送到对应端口的进程中
- 分段和组装: 将进程发来的长报文进行切分并标上序号, 保证数据的顺序正确且不会丢失
- 连接控制: 传输层可以是面向连接或者无连接的, 对前者在数据开始传输前需要建立连接
- 流量控制: 和数据链路层类似, 但是是端口到端口级别的
- 差错控制: 和数据链路层类似, 但是是端口到端口级别的

##### 会话层

负责对话控制 (半双工或者全双工) 与同步 (增加检查点以便快速恢复)

##### 表示层

负责翻译, 压缩与加密数据, 是两个系统间交换信息的语义和语法

##### 应用层

**使用户可以访问网络**, 提供了服务支持, 例如文件传输, 邮件服务, 虚拟终端等

### TCP/IP 协议族

TCP/IP 协议族在 OSI 模型之前开发, 有四个层次, 两者并不严格对应

#### 各层功能

##### 主机到网络层

**相当于 OSI 的物理层和数据链路层**, TCP/IP 支持所有的标准与专用协议, 没有在这一层进行任何定义

##### 互联网层

**相当于 OSI 的网络层**, TCP/IP 支持网际协议 (即IP), 后者使用四个支持协议: ARP, RARP, ICMP, IGMP

- IP: 网际协议, 是无连接, 不可靠的尽力传递服务, 无差错检测
- ARP: 逻辑地址 -> 物理地址
- RARP: 物理地址 -> 逻辑地址
- ICMP: 因特网控制报文协议
- IGMP: 因特网组报文协议, 实现一个报文同时发送给一组接收者

##### 传输层

**相当于 OSI 的传输层**, 有三个协议: TCP ,UDP 和 SCTP (流传输控制协议)
TCP 是有连接的可靠的流传输协议, UDP 无连接, 不可靠

##### 应用层

**相当于 OSI 的会话层, 表示层和应用层**, 常见的 FTP, HTTP, SMTP 等协议在这一层

### 地址与寻址

地址有物理地址, 逻辑地址, 端口地址, 专用地址

#### 物理地址

**在物理层+数据链路层**, 最低级的地址, 在本地网络中有效, 不同种类网络可能不同

#### 逻辑地址

**在网络层**, 与物理地址**无关**, 唯一定义了因特网的一台主机
跳到跳时**物理地址改变** (因为通过了不同的网络设备的中继), 但是**逻辑地址不变** (因为预期的收发者对应的主机不变)

> 在多数协议中, 逻辑源地址在逻辑目的地址之前, 和物理地址刚好相反

#### 端口地址

**在传输层**, 端口对应主机上的进程, 显然在跳到跳传递时端口地址也不变

#### 专用地址

**在网络层**, 例如电子邮件地址, 统一资源定位符 (URL, 例如网址)
由发送计算机转换成对应的端口地址和逻辑地址

# Part 2 物理层与介质

最核心的两个公式 - 波长 $\lambda$, 波速 $v$, 周期 $T$, 频率 $f$ 之间的关系
$$\lambda = v \times T = \frac{v}{f}$$

$$T = \frac{1}{f}$$

国际单位制下的量级表示

| 词头 | 单位 | 词头 | 单位 |
|----- |------|------|-----|
| 毫 $m$   |$10^{-3}$ | 千 $k$ |$10^{3}$   |
| 微 $\mu$ |$10^{-6}$ | 兆 $M$ |$10^{6}$   |
| 纳 $n$   |$10^{-9}$ | 吉 $G$ |$10^{9}$   |
| 皮 $p$   |$10^{-12}$| 太 $T$ |$10^{12}$  |

## Chapter 3 数据与信号

### 关于频率, 频域与带宽

通过傅里叶分析, 可以将任何复合信号分解为一系列正弦波

对于周期复合信号, 正弦波的频率是离散的; 对于非周期复合信号, 正弦波的频率是连续的

将分解后得到的正弦波系列表示到 频率 - 振幅 图上, 即得频域图

复合信号包含的频率范围称为带宽, 即信号最高频率与最低频率的差值

### 数字信号与传输

数字信号是**带宽无穷大**的复合模拟信号, 每一个电平可以表示多个位
$$每个电平表示的位的数量 = \log_2{电平数}$$

#### 比特率

一秒钟内发送的位数, 以 bps 表示

#### 位长

一个位在传输介质上的持续时间
$$位长 = 传播速度 \times 位的持续时间$$

#### 传输

##### 基带传输

通过通道**直接**发送数字信号, 不转换为模拟信号, **需要一个下限频率为0的低通通道**

###### 宽带宽的低通通道

基本可以保持数字信号的形状, 例如同轴电缆和光纤

###### 有限带宽的低通通道

发送的数字信号需要近似成模拟信号,比特率为 $N$ 的数字信号传输最小需要的带宽 $B_{min}$ 满足 $$B_{min} = \frac{N}{2}$$

通过增加更多谐波可以更好地近似

##### 宽带传输

通过调制把数字信号转换成模拟信号传输, 可以使用带通通道 (带宽不从零开始的通道)

#### 传输减损

##### 衰减

能量的损失, 可以使用放大器来补偿

###### 分贝

定义了信号损失或者增益的相对强度, 可以直接加减, 若 $P_1$ $P_2$ 为信号在两点处的**功率**, 则
$$dB = 10 * \log_{10}\frac{P_2}{P_1}$$

需要记住的结论:

- 衰减为负, 放大为正
- $-3dB$ 或者 $3dB$ 衰减说明信号的功率衰减了一半

分贝有时候也被用作以毫瓦计量信号功率的单位, 这时称作 $dB_m$, $dB_m = 10 \times \log_{10}P_m$

##### 失真

信号改变了形态或形状, 产生在有不同频率成分的复合信号中

##### 噪声

信号在传输过程中被掺杂的非信号成分

###### 信噪比

信号功率与噪声功率的比值, 用 $SNR$ 表示
$$SNR = \frac{平均信号功率}{平均噪声功率}$$

使用分贝单位描述信噪比, 被称为 ${SNR}_{dB}$

### 数据速率限制

取决于三个因素: 有效带宽, 使用的信号电平数, 信道的质量 (噪声有多大)

下面 $B$ 表示带宽, $N$ 表示比特率, $L$ 表示使用的信号电平的数量, $SNR$ 表示信噪比

#### 无噪声通道: 奈奎斯特比特率

对无噪声通道, 奈奎斯特比特率公式给出了理论上的最大比特率: $$N = 2 \times B \times \log_{2}L$$

在带宽一定时, 通过增加 $L$ 可以提高传输速率, 但会让接收方难以区分, 降低可靠性

#### 有噪声通道: 香农容量定理

香农容量定理给出了有噪声通道的通道容量:
$$通道容量 = B \times \log_{2}{(1 + SNR)}$$

公式与 $L$ 无关, 说明无论使用多少电平都无法获得超过通道容量的数据传输速率

$SNR$ 很大时, 有 $SNR \approx SNR+1$, 所以通道容量可化简为
$$通道容量 = B \times \frac{ {SNR}_{dB} }{3}$$


#### 总结

香农定理给出数据传输速率的上限, 奈奎斯特公式给出所需的信号电平数

### 性能

#### 带宽

可以指两个东西: 以频率衡量, 或以 $bps$ 衡量
前者表明通道的频率范围, 后者表明每秒能发送的位数

#### 吞吐量

衡量通过网络发送数据的快慢, 必定小于等于带宽

#### 延迟

第一个位从源端到最后一个位 (即整个报文) 到达目的端的时间, 由四部分组成

##### 传播时间

介质中一个位从源端到目标的时间

$$传播时间 = \frac{距离}{传播速度}$$

##### 传输时间

报文的第一个位与最后一个位离开发送方的时间, 也就是发送方把报文加载到介质上所用的时间
$$传输时间 = \frac{报文长度}{带宽}$$

##### 排队时间

网络上每个中间设备在收到本报文后, 处理本报文前的时间 (因为有其他先到的报文等待处理)

##### 处理延迟

接收者处理报文所用的时间 (书上不知道为啥没写这点...)

#### 带宽与延迟的乘积

充满整个链路的位的个数

## Chapter 4 数字传输

> To be finished later...
