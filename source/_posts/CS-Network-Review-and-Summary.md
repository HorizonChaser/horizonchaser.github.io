---
title: CS Network Review and Summary
date: 2021-06-13 20:47:19
math: true
excerpt: 2021期末计网复习总结
tags:
 - CS Network
 - Review
---

# 说明 & 食用方法

个人按照计网老师发的提纲从书上总结的重点 (这话有点重复...)

标题后标有 `[IMP]` 的为提纲上加粗的, 大概就是重点中的重点了吧
~~还没标~~

# Part 1 概述

## Chapter 1 绪论

### 数据通信的概念

- 四个关键因素: 传递性 准确性 及时性 抖动性
- 五个组成部分: 报文 发送方 接收方 传输介质 协议
  
### 数据流

- 单工: 通信是单方向的
- 半双工: 通信是双向的, 但不能同时收发
- 全双工: 双向通信, 可同时收发
  
### 连接类型

- 点到点: 两设备间的专用线路
- 多点连接: 两台以上的设备共用单一链路

### 物理拓扑结构

- 网状: 任意两设备间都有专用的点到点线路, $n$台设备需要 $\frac{n*(n-1)}{2}$ 条双工链路
- 星型: 每台设备仅拥有一条与中央控制器 (被称为集线器, hub) 相连的点到点线路
- 总线: 用一条较长的线缆作为主干来连接网络上的所有设备, 各设备通过引出线连接到主干
- 环状: 每台设备只与两侧设备有一条专用的点到点连接, 信号以一个方向在环中传输, 每台设备均有中继器 (可再生并转发收到的所有信号)
- 混合型
  
### 网络分类

- 局域网 (local area network, LAN): 小范围内的共享, 例如一间办公室或一所学校, 通常仅采用一种传输介质
- 广域网 (wide area network, WAN):
  - 交换广域网: 将不同的网络连接起来, 通常包含至少一个网际互联设备 (例如路由器)
  - 点到点广域网: 将一台设备连接到广域网, 例如 ISP (Internet service provider, 网络服务提供商) 提供的网络服务
- 城域网 (metropolitian area network, MAN): 规模介于 LAN 和 WAN 之间, 覆盖范围通常是一个乡镇 / 城市
  
### 协议和标准

#### 协议三要素

- 语法: 数据的结构或格式, 即数据是以何种顺序表示的
- 语义: 每一个位片段的含义, 即如何理解每一个位置上的位的含义
- 时序: 报文发送的时间和发送的速率
  
#### 标准

- 事实标准: 未经团体或组织承认但已经在广泛使用中的标准
- 法定标准: 有官方认可的组织制定的标准

## Chapter 2 网络模型

![Model](https://gitee.com/HorizonChaser/pic-bed/raw/master/img/20210616190804.png)

### OSI模型

OSI (Open System Interconnection, 开放系统互连) 模型, **不是协议, 也不是 ISO 那个组织**

#### 分层的概念与层间连接

- 对等过程: 设备间同一层次的通信过程, 例如物理层 - 物理层, 传输层 - 传输层
- 层间接口: 每层的接口都定义了本层向上下两层提供的服务, 无关层内的具体实现, 便于修改
- 封装: 第 $N-1$ 层的分组中的数据部分是第 $N$ 层的完整分组, 后者被 $N-1$ 层视为一个完整的数据单元, 不关心内部结构

#### 各层功能

##### 物理层

**负责位从一个节点到另一个节点的传递**, 定义了接口和介质的物理特性, **不对数据进行任何改动**

###### 功能

- 位的表示 (把0 1转换为对应种类的信号)
- 传输速率 (发送位的速度, 每一位持续的时间)
- 位同步, 线路配置, 物理拓扑结构, 传输方式等等

##### 数据链路层

**负责帧从一个节点 (node, 通常也被称作一跳, one hop)到下一个节点 (即下一跳) 的传递, 在同一个网络内部**, 将物理层变为可靠的链路

###### 功能

- 成帧: 将来自网络层的位流分割为帧 (frame)
- 物理寻址: **在本地网络范围内**, 按照网络设备的物理地址寻找接收者, 例如 MAC 地址
- 流量控制: 协调发送速率, 防止过载
- 差错控制: 检测与重发损坏与丢失的帧, 并防止重复的帧
- 访问控制: 并发访问同一条链路时决定访问的顺序

##### 网络层

**负责将各个分组从源地址传送到目的地址 (源端到目的端, 即端到端), 可以跨网络传送**, 但不保证报文间的到达顺序 - ~~所以叫网络层(个人理解)~~

###### 功能

- 逻辑寻址: 与物理寻址相对, 可以跨网络
- 路由选择: 提供在网络间传递分组的路径

##### 传输层

**负责报文的进程到进程传递**, 保证报文间的**顺序**与内容正确并提供给相应的进程

###### 功能

- 服务点寻址: 也叫端口寻址, 把报文送到对应端口的进程中
- 分段和组装: 将进程发来的长报文进行切分并标上序号, 保证数据的顺序正确且不会丢失
- 连接控制: 传输层可以是面向连接或者无连接的, 对前者在数据开始传输前需要建立连接
- 流量控制: 和数据链路层类似, 但是是端口到端口级别的
- 差错控制: 和数据链路层类似, 但是是端口到端口级别的

##### 会话层

负责对话控制 (半双工或者全双工) 与同步 (增加检查点以便快速恢复)

##### 表示层

负责翻译, 压缩与加密数据, 是两个系统间交换信息的语义和语法

##### 应用层

**使用户可以访问网络**, 提供了服务支持, 例如文件传输, 邮件服务, 虚拟终端等

### TCP/IP 协议族

TCP/IP 协议族在 OSI 模型之前开发, 有四个层次, 两者并不严格对应

#### 各层功能

##### 主机到网络层

**相当于 OSI 的物理层和数据链路层**, TCP/IP 支持所有的标准与专用协议, 没有在这一层进行任何定义

##### 互联网层

**相当于 OSI 的网络层**, TCP/IP 支持网际协议 (即IP), 后者使用四个支持协议: ARP, RARP, ICMP, IGMP

- IP: 网际协议, 是无连接, 不可靠的尽力传递服务, 无差错检测
- ARP: 逻辑地址 -> 物理地址
- RARP: 物理地址 -> 逻辑地址
- ICMP: 因特网控制报文协议
- IGMP: 因特网组报文协议, 实现一个报文同时发送给一组接收者

##### 传输层

**相当于 OSI 的传输层**, 有三个协议: TCP ,UDP 和 SCTP (流传输控制协议)
TCP 是有连接的可靠的流传输协议, UDP 无连接, 不可靠

##### 应用层

**相当于 OSI 的会话层, 表示层和应用层**, 常见的 FTP, HTTP, SMTP 等协议在这一层

### 地址与寻址

地址有物理地址, 逻辑地址, 端口地址, 专用地址

#### 物理地址

**在物理层+数据链路层**, 最低级的地址, 在本地网络中有效, 不同种类网络可能不同

#### 逻辑地址

**在网络层**, 与物理地址**无关**, 唯一定义了因特网的一台主机
跳到跳时**物理地址改变** (因为通过了不同的网络设备的中继), 但是**逻辑地址不变** (因为预期的收发者对应的主机不变)

> 在多数协议中, 逻辑源地址在逻辑目的地址之前, 和物理地址刚好相反

#### 端口地址

**在传输层**, 端口对应主机上的进程, 显然在跳到跳传递时端口地址也不变

#### 专用地址

**在网络层**, 例如电子邮件地址, 统一资源定位符 (URL, 例如网址)
由发送计算机转换成对应的端口地址和逻辑地址

# Part 2 物理层与介质

最核心的两个公式 - 波长 $\lambda$, 波速 $v$, 周期 $T$, 频率 $f$ 之间的关系
$$\lambda = v \times T = \frac{v}{f}$$

$$T = \frac{1}{f}$$

国际单位制下的量级表示

| 词头 | 单位 | 词头 | 单位 |
|----- |------|------|-----|
| 毫 $m$   |$10^{-3}$ | 千 $k$ |$10^{3}$   |
| 微 $\mu$ |$10^{-6}$ | 兆 $M$ |$10^{6}$   |
| 纳 $n$   |$10^{-9}$ | 吉 $G$ |$10^{9}$   |
| 皮 $p$   |$10^{-12}$| 太 $T$ |$10^{12}$  |

## Chapter 3 数据与信号

### 关于频率, 频域与带宽

通过傅里叶分析, 可以将任何复合信号分解为一系列正弦波

对于周期复合信号, 正弦波的频率是离散的; 对于非周期复合信号, 正弦波的频率是连续的

将分解后得到的正弦波系列表示到 频率 - 振幅 图上, 即得频域图

复合信号包含的频率范围称为带宽, 即信号最高频率与最低频率的差值

### 数字信号与传输

数字信号是**带宽无穷大**的复合模拟信号, 每一个电平可以表示多个位
$$每个电平表示的位的数量 = \log_2{电平数}$$

#### 比特率

一秒钟内发送的位数, 以 bps 表示

#### 位长

一个位在传输介质上的持续时间
$$位长 = 传播速度 \times 位的持续时间$$

#### 传输

##### 基带传输

通过通道**直接**发送数字信号, 不转换为模拟信号, **需要一个下限频率为0的低通通道**

###### 宽带宽的低通通道

基本可以保持数字信号的形状, 例如同轴电缆和光纤

###### 有限带宽的低通通道

发送的数字信号需要近似成模拟信号,比特率为 $N$ 的数字信号传输最小需要的带宽 $B_{min}$ 满足

$$B_{min} = \frac{N}{2}$$

通过增加更多谐波可以更好地近似

##### 宽带传输

通过调制把数字信号转换成模拟信号传输, 可以使用带通通道 (带宽不从零开始的通道)

#### 传输减损

##### 衰减

能量的损失, 可以使用放大器来补偿

###### 分贝

定义了信号损失或者增益的相对强度, 可以直接加减, 若 $P_1$ $P_2$ 为信号在两点处的**功率**, 则
$$dB = 10 * \log_{10}\frac{P_2}{P_1}$$

需要记住的结论:

- 衰减为负, 放大为正
- $-3dB$ 或者 $3dB$ 衰减说明信号的功率衰减了一半

分贝有时候也被用作以毫瓦计量信号功率的单位, 这时称作 $dB_m$, $dB_m = 10 \times \log_{10}P_m$

##### 失真

信号改变了形态或形状, 产生在有不同频率成分的复合信号中

##### 噪声

信号在传输过程中被掺杂的非信号成分

###### 信噪比

信号功率与噪声功率的比值, 用 $SNR$ 表示
$$SNR = \frac{平均信号功率}{平均噪声功率}$$

使用分贝单位描述信噪比, 被称为 ${SNR}_{dB}$

$${SNR}_{dB} = 10 \times \log_{10}{SNR}$$

### 数据速率限制

取决于三个因素: 有效带宽, 使用的信号电平数, 信道的质量 (噪声有多大)

下面 $B$ 表示带宽, $N$ 表示比特率, $L$ 表示使用的信号电平的数量, $SNR$ 表示信噪比

#### 无噪声通道: 奈奎斯特比特率

对无噪声通道, 奈奎斯特比特率公式给出了理论上的最大比特率:

$$N = 2 \times B \times \log_{2}L$$

在带宽一定时, 通过增加 $L$ 可以提高传输速率, 但会让接收方难以区分, 降低可靠性

#### 有噪声通道: 香农容量定理

香农容量定理给出了有噪声通道的通道容量:
$$通道容量 = B \times \log_{2}{(1 + SNR)}$$

公式与 $L$ 无关, 说明无论使用多少电平都无法获得超过通道容量的数据传输速率

$SNR$ 很大时, 有 $SNR \approx SNR+1$, 所以通道容量可化简为
$$通道容量 = B \times \frac{ {SNR}_\textbf{ {dB} } }{3}$$

注意此时使用的是 **SNR ~dB~**

#### 总结

香农定理给出数据传输速率的上限, 奈奎斯特公式给出所需的信号电平数

### 性能

#### 带宽

可以指两个东西: 以频率衡量, 或以 $bps$ 衡量
前者表明通道的频率范围, 后者表明每秒能发送的位数

#### 吞吐量

衡量通过网络发送数据的快慢, 必定小于等于带宽

#### 延迟

第一个位从源端到最后一个位 (即整个报文) 到达目的端的时间, 由四部分组成

##### 传播时间

介质中一个位从源端到目标的时间

$$传播时间 = \frac{距离}{传播速度}$$

##### 传输时间

报文的第一个位与最后一个位离开发送方的时间, 也就是发送方把报文加载到介质上所用的时间
$$传输时间 = \frac{报文长度}{带宽}$$

##### 排队时间

网络上每个中间设备在收到本报文后, 处理本报文前的时间 (因为有其他先到的报文等待处理)

##### 处理延迟

接收者处理报文所用的时间 (书上不知道为啥没写这点...)

#### 带宽与延迟的乘积

充满整个链路的位的个数

## Chapter 4 数字传输

### 线路编码

#### 数据元素与信号元素

- 数据元素: 表示信息的最小实体, 即位
- 信号元素: 发送的最小单元

$r$: 每个信号元素承载的数据元素的数量

##### 数据速率与信号速率

- 数据速率 $N$ : 每秒发送的数据元素的数量, 单位是 *每秒位 (bps)*, 也称作**比特率**
- 信号速率 $S$ : 每秒发送的信号元素的数量, 单位是 *波特 (baud)*, 也称作调制速率, **波特率**
- 情形因子 $c$ : 会根据每种情形改变

$$S = c \times N \times \frac{1}{r} \ \ baud$$

$$B_{min} = c \times N \times \frac{1}{r}$$

注意第二个公式和奈奎斯特公式的关系 (可以相互推导, 书 p69 中间 例4.2)

#### 基线偏移

- 基线偏移: 接收方通过计算接收的信号的功率平均值 (即"基线") 来确定高低电平, 连续的 0 或者 1 会影响基线
- 直流成分: 信号中的电平保持一定时间的恒定时, 会产生很低的频率, 近似直流 (DC)

#### 自同步

通过在信号中添加能提示接收方的定时信息来实现双方的时钟同步

### 线路编码

![编码方案](https://gitee.com/HorizonChaser/pic-bed/raw/master/img/20210615193504.png)

#### NRZ (不归零编码)

1 为正电平, 0 为零电平, 因为在位中间电平不为零而得名

##### NRZ-L 与 NRZ-I

![NRZ-L/I](https://gitee.com/HorizonChaser/pic-bed/raw/master/img/20210615193725.png)

NRZ-L 中电平决定位的值, NRZ-I 中每一个周期的电平和前一个周期相比是否反转决定位的值

- 基线偏移: 均有, 但 NRZ-I 中仅全 0 的序列会导致偏移
- 同步问题: 均有, 但 NRZ-I 中仅全 0 的序列会导致同步问题
- 直流成分: 均有
- 平均信号速率: 均为 $N/2 \ {Bd}$

> 因为全 0 时 NRZ-I 的电平不变, 但全 1 时能一直反转

#### RZ (归零编码)

![RZ](https://gitee.com/HorizonChaser/pic-bed/raw/master/img/20210615194511.png)

在位中间信号必定归零, $r = \frac{1}{2}$

#### 曼彻斯特编码 和 差分曼彻斯特编码

![Manchester/DiffMan](https://gitee.com/HorizonChaser/pic-bed/raw/master/img/20210615194637.png)

- 双向编码, 也称作两项编码
- 均有自同步信号
- 均无直流成分
- 平均信号速率: 均为 $N \ {Bd}$

##### 曼彻斯特编码

- RZ 和 NRZ-L 思想组合而成
- 位中间的跳变提供了自同步信号

##### 差分曼彻斯特编码

- RZ 和 NRZ-I 思想组合而成
- 位中间的跳变提供了自同步信号

#### AMI 和 伪三元编码

![AMI/Pseudo](https://gitee.com/HorizonChaser/pic-bed/raw/master/img/20210615195837.png)

- 双极性编码, 使用三种电平 (正, 负, 零)
- 0 和 1 其中一个电平固定为0, 另一个由交替的正负电平表示
- AMI 没有直流成分 (因为长 0 的电平为零, 长 1 正负交替抵消了)
- AMI 在长 0 序列中存在同步问题, 采用扰动解决
- 平均信号速率: $N/2 \ {Bd}$

#### 多电平与多线路编码

按老师给的 pdf 仅要求了解, 看书就行

#### 线路编码 总结

![Summary](https://gitee.com/HorizonChaser/pic-bed/raw/master/img/20210615200432.png)

> Biphase: 双向, 即曼彻斯特编码 和 差分曼彻斯特编码

### 块编码

按老师给的 pdf 仅要求了解, 看书就行

### 扰码

建议看书 😵, p79

### 脉冲码调制 (PCM)

将模拟信号转为数字信号的最常用方法, 分为三步: **采样  量化  编码**

#### 采样

也被称作 脉冲振幅调制 (PAM)

- 采样率 $f_S$ : 每隔 $T_S$ 对模拟信号进行采样, $f_S = \frac{1}{T_S}$
- 奈奎斯特采样定理: **采样速率至少是信号所含最高频率的两倍**

#### 量化

1. 假定原始信号在 $[V_{min}, V_{max}]$ 范围中
2. 将范围等分为 $L$ 个区间 (称为量化等级), 每个区间的长度为 $delta$

$$delta = \frac{V_{max} - V_{min}}{L}$$

3. 取每个区间的中点作为每个区间的量化值, 然后将 $0 \sim L-1$ 的量化值分配给这些区间
4. 将样本的振幅近似为量化值

> 建议参考 p83 的例子

##### 量化误差

- 任何一个样本的误差值都小于 $\frac{delta}{2}$
- 量化误差对信号 ${SNR}_{dB}$ 的影响取决于量化级别 $L$ 或每个样本的位数 $n_b$

$${SNR}_{dB} = 6.02\ n_b + 1.76 \ \ dB$$

#### 编码

$$N = f_S \times n_b$$

$N$ 为编码后的比特率

#### Delta 调制

对量化后的信号, 调制器内的比较器把它和一个梯形的基准信号进行比较, 前者大则为 1, 反之为 0.

梯形基准信号来自于调制器自身的输出, 1 为上升, 0 为下降, 变化量即为 $delta$, 经过延迟后送入比较器.

Delta 调制同样存在量化误差, 但是远小于 PCM 的误差.

### 传输模式

#### 串行与并行

- 并行: 利用多个通道, 每次发送多个位
- 串行: 仅需一个通道, 每次仅发送一个位, 可采用同步, 异步或等时传输

#### 同步与异步

- 异步: 将位流组合成组 (通常称为字节), 需要起始位和停止位, 不需要关心时序
- 同步: 将位流组合成帧 (更长, 包含多个字节), 没有时隙, 起始位与停止位
- 等时: 数据以恒定速率到达

## Chapter 5 模拟传输

![AnalogTrans](https://gitee.com/HorizonChaser/pic-bed/raw/master/img/20210616184347.png)

### 比特率和波特率

定义带宽为 $B$

- 比特率: 数据速率, $N$
- 波特率: 信号速率, $S$

$$S=N \times \frac{1}{r} \ \ 波特$$

$$r = \log_2{L},\  L为信号元素的种类数$$

### 幅移键控 (ASK)

![ASK](https://gitee.com/HorizonChaser/pic-bed/raw/master/img/20210616184439.png)

- 仅通过改变信号的振幅来生成信号元素, 不改变频率 相位等
- 若仅有两个振幅, 则称为 BASK (二进制 ASK) 或 OOK (开关键控)
- 带宽: $B=(1+d) \times S$, $d \in [0, 1]$ , 取决于调制和过滤处理
- 载波频率 $f_c$ 位于带宽中间

### 频移键控 (PSK)

![PSK](https://gitee.com/HorizonChaser/pic-bed/raw/master/img/20210616184518.png)

- 使用多种频率, 一种振幅, 若相邻两信号元素间相位一致, 称为"相干", 反之为"非相干"
- 若仅有两个频率, 则称为 BPSK (二进制 PSK)
- 带宽: $B=(1+d) \times S + 2Df$, $2Df$ 为两个载波频率之差, 最小即为 $S$ (此时两个段紧贴)

### 相移键控

#### 二进制PSK (BPSK)

![BPSK](https://gitee.com/HorizonChaser/pic-bed/raw/master/img/20210616185709.png)

- 仅使用两个不同的相位: $0 \degree$ 和 $180 \degree$
- 带宽: $B=(1+d) \times S$, 和 BASK 一样, 但抗噪声能力更强

#### 正交PSK (QPSK)

- 使用两个独立的 BPSK 调制, 一个同相一个正交 (即 $90\degree$)
- 带宽: $B=(1+d) \times S$, 和 BPSK 一样
- $L=4, \ r = 2$

#### 星座图

![Constellation](https://gitee.com/HorizonChaser/pic-bed/raw/master/img/20210616190219.png)

- X 轴为同相成分振幅, Y 轴为正交成分振幅
- 与原点距离为总振幅, 与 X 轴正半轴夹角为相位

### 正交振幅调制 (QAM)

- 结合了 ASK 和 PSK 的理念, 同时利用了振幅和相位的变化
- 最小带宽: 和 ASK, PSK 相同 (忘了的话往前看看)

### 模拟信号调制

AM, FM, PM, 提纲完全没提, 自己看一下书 p99 ~ p102 就行

## Chapter 6 带宽利用

### FDM (频分复用) [IMP]

- 在同一介质上使用不同的频率传输信号
- 是模拟复用技术 (直接发送的是模拟信号, 因此数字信号需要先调制)
- 在分离时通过特定频段的滤波器实现通道分离
- 复用的要求
  - 链路带宽大于要传输的信号带宽之和
  - 载波信号之间的频率差必须能容纳调制信号的带宽 (不发生重叠)
  - 载波频率不影响原始的数据频率

### TDM (时分复用) [IMP]

- 数字化复用过程
- 每个连接占用链路的一个时间段
  
#### 同步 TDM

![S-TDM](https://gitee.com/HorizonChaser/pic-bed/raw/master/img/20210617185037.png)

- 每个输入的数据流划分为多个数据单元
- 所有输入的数据单元按照顺序组合成一个帧, 每个数据单元占一个**时隙**
- 若有 $n$ 个输入, 一帧的持续时间为 $T$:
  - 一帧中有 $n$ 个时隙
  - 每个时隙的持续时间是 $T/n$
  - 链路速率是每个连接数据速率的 $n$ 倍
- 需要在每帧开始的时候添加一些用来同步的**帧指示位**
- 缺点: 当某个连接无数据发送时会出现**空时隙**

##### T-1 帧

- 将 24 路语音信号通过 TDM 组合为 1 路
- 采样: 每秒 8000 次, 每样本 8 位
- 每秒发送 8000 帧, 链路带宽 1.544 Mbps
  
帧大小: 193位, 其中 1 位用于同步
$$\overbrace{24}^{通道数} \times \overbrace{8}^{样本大小} + \overbrace{1}^{同步位} = 193$$

带宽: 1.544 Mbps
$$193 \ bps \times \overbrace{8000}^{每秒帧数} = 1.544 \ Mbps$$

##### E 线路

T 线路的欧洲版本, 原理与概念相同, 但是容量不同

#### 统计 TDM

![Stat-TDM](https://gitee.com/HorizonChaser/pic-bed/raw/master/img/20210617191722.png)

- 循环检测每个输入, 若某输入无数据则不分配时隙 -> 避免了空时隙
- 每个时隙需要添加地址, $n$ 个输入需要 $\log_2{n}$ 位地址
- **没有同步位, 因为统计 TDM 不依赖时间同步来拆分数据**
- 链路容量可以小于输入的带宽之和 (因为无数据就不分配时隙了)

### WDM (波分复用)

以光线为介质, 通过不同波长的频率实现复用, 和 FDM 类似

### 扩频

#### 跳频扩频 (FHSS)

![FHSS](https://gitee.com/HorizonChaser/pic-bed/raw/master/img/20210617192640.png)

- 通过伪随机噪声在频率表中选择一个频率
- 在一段时间内 (称为跳), 将源信号使用选出的频率进行调制
- 伪随机噪声周期性重复
- 通过多频率FSK可以实现带宽共享

#### 直接序列扩频

![DSSS](https://gitee.com/HorizonChaser/pic-bed/raw/master/img/20210617193003.png)

- 使用固定的扩频码对源信号进行调制
- 每个数据位使用扩频码的n位代替

## Chapter 7 传输介质

### 有向介质

- 在设备间提供通路的介质
- 包括双绞线, 同轴电缆, 光缆

#### 双绞线 [IMP]

- 由两条导线缠绕在一起组成
- 通过缠绕可以保证两条线受到的外部影响 (例如噪声) 一致, 故绞合密度越高质量越高
- 分为非屏蔽双绞线 (UTP) 和屏蔽双绞线 (STP), 前者更常用, 后者用金属屏蔽层包裹每一对双绞线
- 最常用的连接器是 RJ45 (就是最常见的那个网线接头, 8根线)

#### 同轴线缆

![CCable](https://gitee.com/HorizonChaser/pic-bed/raw/master/img/20210617210129.png)

- 仅使用中央的一根实心 (或者是多股绞合的金属丝) 导体, 外面有金属屏蔽层
- 使用 BNC 连接器, 带宽高但衰减大

#### 光纤

![Fiber](https://gitee.com/HorizonChaser/pic-bed/raw/master/img/20210617210412.png)

- 通过传导光实现通信, 带宽很大
- 分为单模光纤和多模光纤
  - 单模: 光束接近水平, 几乎均沿中间传播
  - 多模: 多个光束沿着不同路径, 依赖折射

### 无线通信

![ElecSpectrum](https://gitee.com/HorizonChaser/pic-bed/raw/master/img/20210617210557.png)

- 无线电波: 3 kHz ~ 1 GHz, 大部分全方向
- 微波: 1 GHz ~ 300 GHz, 指向性强, 使用单向天线 (定向天线)
- 红外: 300 GHz ~ 400 THz, 视线传播, 太阳会干扰

## Chapter 8 交换

### 电路交换 [IMP]

![CircuitExchange](https://gitee.com/HorizonChaser/pic-bed/raw/master/img/20210617211550.png)

![CircuitExchange](https://gitee.com/HorizonChaser/pic-bed/raw/master/img/20210617211411.png)

- 在物理层, 由物理链路连接的一组交换机组成, 链路会被复用
- 在通信开始前要预先建立通道, 在整个传输过程中一直保留, 直到最后的拆除阶段
- 数据传输期间无需寻址, 建立时需要端到端的寻址
- 延迟:
  - 源计算机请求信息到目标计算机
  - 目标计算机确认信息到源计算机
  - 数据传输时间
  - 拆除信息从一端到另一端的时间

### 数据报交换 [IMP]

![DatagramExchange](https://gitee.com/HorizonChaser/pic-bed/raw/master/img/20210617212244.png)

![DatagramExchange](https://gitee.com/HorizonChaser/pic-bed/raw/master/img/20210617212312.png)

- 在网络层, **是因特网在网络层采用的交换方法**
- 不需要建立连接, 也不需要拆除 (也被称作无连接网络, 交换机不保存连接信息), 按需分配资源, 先来先服务
- 各分组单独处理 (即使某个分组是某个多分组传输的一部分), 到达同一目的地的路径可能不一致
  - 可能会出现分组丢失或错序, 由上层协议负责修正
- 交换机使用基于目的地址的路由表, 它记载了目的地址和交换机端口的对应关系
- 延迟:
  - 各交换机的排队与处理延迟
  - 传输时间

### 虚电路网络 [IMP]

> 建议看书, p143 ~ p147, 提纲仅作为总结

- 结合了电路交换与数据报交换
- 通常在数据链路层实现, 但未来可能变化
- 需要在数据传输前建立连接

#### 编址

- 全局编址: 源端和目的端的地址, 广域网唯一
- 虚电路标识符: 仅在两交换机间有效, 作为帧前的标识符
- 交换机的表: 不是路由表, 有四列: 输入端口, 输入VCI, 输出端口, 输出VCI

#### 连接建立

设源端为 A, 目的端为 B

![setup1](https://gitee.com/HorizonChaser/pic-bed/raw/master/img/20210617214418.png)

1. A 向交换机 1 发送建立连接帧
2. 交换机1从端口1接受帧, 分配一个VCI, 通过路由表得到应发往端口3, 但输出VCI留空
3. 交换机2~3相同

![setup2](https://gitee.com/HorizonChaser/pic-bed/raw/master/img/20210617214431.png)

4. B 收到建立连接帧, 给从 A 来的帧分配一个VCI, 发给交换机3
5. 交换机3接受, 得到表中缺失的VCI项, 发给交换机2
6. 交换机1~2相同, A 收到确认, 之后向 B 发送的帧使用交换机1指定的VCI, 连接建立

#### 连接拆除

同样是请求 - 确认两步

#### 延迟

类似数据报交换, 建立 + 传输 + 拆除, 如果预留资源的话没有等待延迟

### 交换机结构

提纲没有, 看两眼书就行

### Chapter 9 使用电话网和有线电视网进行数据传输

#### 信令的概念 [IMP]

> 信令: 指为使通信网中各种设备协调运作，在设备之间传递的有关控制信息
> \- 来自维基百科

简单来说, 信令就是用来控制设备的指令信息

- 带内信令: 用和数据通信同一链路传递的信令
- 带外信令: 和数据通信用不同链路传递的信令, 是现代电话网采用的方式

#### 调制与解调

- 调制: 从二进制数据生成带通模拟信号
- 解调: 👆 反过来
- 调制解调器: 调制器 + 解调器, modem

#### ADSL (非对称数字用户线路)

- 属于 DSL 技术之一
- 下行速率比上行快 (所以是非对称)
- 需要调制解调器

# Part 3 数据链路层

## Chapter 10 检错与纠错

### 差错的类型

- 单个位差错: 在给定的数据单元中只有一个位出错
- 突发性差错: 在给定的数据单元中有两位或更多位出错

### 块编码

把报文划分为块, 每个块有 $k$ 位, 并增加 $n$ 个冗余位

总长度: $n=k+r$, $n$ 位的块称为码字

### 纠错

- 向前纠错: 接收方利用冗余位推测正确的报文
- 重传: 检测出差错后要求发送方重发

#### 汉明距离

两个相同长度的字中对应位置的位不同的数量, 以 $d(x,\ y)$ 表示

可以采用异或后计算 1 的个数求得

#### 最小汉明距离 [IMP]

所有字两两组合求得的汉明距离的最小值

- 为了检测最多 $s$ 个差错, 块编码中最小汉明距离一定满足 $d_{min} \ge s+1 $
- 为了纠正最多 $t$ 个差错, 块编码中最小汉明距离一定满足 $d_{min} \ge 2t+1 $

### 线性块编码

#### 简单奇偶校验

添加一位, 使得码字中的 1 为偶数 (或奇数)

#### 二维奇偶校验

每一行和每一列均进行一次奇偶校验, 同时角落上的那个按照列进行校验

四位差错可能检测不到

#### 汉明编码

看计组书吧, 这里对计网来说不是重点

### 循环冗余校验 (CRC)

假设有 $k$ 位数据, $n$ 位码字, 校验码有 $n-k$ 位

#### 计算 [IMP]

1. 将数据字右侧补 $n-k$ 位零
2. 对 1 的结果除以除数
   - 因为是模 2 的二进制除法, 所以加减都等价于异或运算
   - 若最左侧的位为 0, 则商 0, 否则商 1
   - 每一步保留后 $n-k-1$ 位, 然后最后一位从被除数中对应位置移下来  

3. 当没有可移下来的位时, 计算完成, 余数即为结果

![CRC](https://gitee.com/HorizonChaser/pic-bed/raw/master/img/20210618003752.png)

##### 多项式除法

- 每一项的幂次表示在二进制表示法中对应的位置, 若该项系数为 1 则对应位为 1
- 和上面的二进制算法本质一样
- 同样用异或代替加减法, 所以不会有负的系数

#### 差错检测能力

##### 单个位差错

若 **生成多项式至少两项** 且 **$x^0$的系数为 1**, 则所有的单个位差错均可检测

##### 两个独立的单个位差错

若 生成多项式不能整除 $x^t+1,\ t \in [1,\ n-1]$, 则所有独立的双差错均可检测

##### 奇数个差错

若 生成多项式包含 $x+1$, 则可检测所有的奇数个差错

##### 突发性差错

- 所有 $L \le r$ 的突发性差错均可检测
- 所有 $L = r+1$ 的突发性差错有 $1-{\frac{1}{2}}^{(r-1)}$ 的概率被检测
- 所有 $L > r+1$ 的突发性差错有 $1-{\frac{1}{2}}^{(r)}$ 的概率被检测

##### 表现较好的生成多项式

- 至少两项
- 包含 $x^0$
- 不能整除 $x^t+1,\ t \in [1,\ n-1]$
- 有因子 $x+1$

### 校验和

核心是求和**取反**

$n$ 位的校验和计算方法

- 报文按照 $n$ 位划分为字
- 校验和设为 0, 每个字求和
- 对和求反码作为校验和

接收方计算相同, 若得到的校验和为 0 说明校验成功

## Chapter 11 数据链路控制

> 🕊🕊🕊
